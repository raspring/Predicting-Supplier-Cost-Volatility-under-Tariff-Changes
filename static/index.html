<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Predict Landed Cost of Goods</title>
    <style>
        body { font-family: Arial; max-width: 600px; margin: 40px auto; }
        input, button { width: 100%; padding: 10px; margin-bottom: 12px; }
        button { cursor: pointer; background: #007bff; color: white; border: none; }
        #result { margin-top: 20px; padding: 15px; background: #f5f5f5; white-space: pre-wrap; }
        h2 { text-align: center; }
    </style>
</head>
<body>

<h2>Predict Supplier Cost</h2>

<form id="predict-form">
    <label>Shipping Cost</label>
    <input type="number" step="0.0001" id="shipping_cost" value="277.11" required>

    <label>Lead Time (days)</label>
    <input type="number" id="lead_time_days" value="24" required>

    <label>Defect Rate</label>
    <input type="number" step="0.0001" id="defect_rate" value="0.03" required>

    <label>Base Cost</label>
    <input type="number" step="0.0001" id="base_cost" value="1489.44" required>

    <label>Tariff Rate</label>
    <input type="number" step="0.0001" id="tariff_rate" value="0.0" required>

    <label>Year</label>
    <input type="number" id="year" value="2025" required>

    <label>Country of Origin</label>
    <input type="text" id="country_origin" value="India" required>

    <label>HS Code</label>
    <input type="text" id="hs_code" value="722490" required>

    <button type="submit">Predict</button>
</form>

<div id="result"></div>

<script>
document.getElementById("predict-form").addEventListener("submit", async function(event) {
    event.preventDefault(); // Prevent default GET submission

    const body = {
        shipping_cost: parseFloat(document.getElementById("shipping_cost").value),
        lead_time_days: parseInt(document.getElementById("lead_time_days").value),
        defect_rate: parseFloat(document.getElementById("defect_rate").value),
        base_cost: parseFloat(document.getElementById("base_cost").value),
        tariff_rate: parseFloat(document.getElementById("tariff_rate").value),
        year: parseInt(document.getElementById("year").value),
        country_origin: document.getElementById("country_origin").value,
        hs_code: document.getElementById("hs_code").value
    };

    try {
        const response = await fetch("/predict_cost", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(body)
        });

        if (!response.ok) {
            const err = await response.json();
            document.getElementById("result").innerText = "Error: " + JSON.stringify(err);
            return;
        }

        const result = await response.json();
        document.getElementById("result").innerText = "Predicted Cost: " + result.predicted_cost;

    } catch (error) {
        document.getElementById("result").innerText = "Request failed: " + error;
    }
});
</script>

</body>
</html>
